# ubuntu fde with hibernate

Demo showing ubuntu install with full disk encryption (fde)
and WORKING hibernation.

The ubuntu server iso is set up using autoinstall 

```
sudo apt install cloud-image-utils
```

check user data
``` 
python3 -c 'import yaml, sys, json; print(json.dumps(yaml.safe_load(sys.stdin), indent=2))' < user-data
``` 



```
mkdir ~/vm/ubuntu-fde-hibernate
qemu-img create -f qcow2 ~/vm/ubuntu-fde-hibernate/vm-disk.qcow2 20G
```

```
qemu-system-x86_64 \
  -m 4096 \
  -smp 2 \
  -enable-kvm \
  -drive file=~/Downloads/ubuntu-24.04.2-live-server-amd64.iso,media=cdrom \
  -drive file=working/nocloud.iso,media=cdrom \
  -drive file=~/vm/ubuntu-fde-hibernate/vm-disk.qcow2,format=qcow2 \
  -boot d \
  -serial mon:stdio \
  -net nic -net user \
  -nographic 
  -kernel ./vmlinuz \
  -initrd ./initrd \
  -append "autoinstall ds=nocloud;s=/cdrom/ console=ttyS0"

```